<header>
  <div class="container">
    <h1 class="logo">On-Demand-Tutor</h1>
    <nav>
      <ul>
        <li><a href="home">Trang chủ </a></li>
        <li><a routerLink="/search_tutor">Tìm gia sư </a></li>
        <li><a href="about">Về chúng tôi </a></li>
        <li><a href="contact">Liên hệ</a></li>
      </ul>
    </nav>


    <!-- Avatar with dropdown -->
    <div class="avatar-menu">
      <img
        src="https://scontent.fsgn5-8.fna.fbcdn.net/v/t1.30497-1/453178253_471506465671661_2781666950760530985_n.png?stp=cp0_dst-png_s40x40&_nc_cat=1&_nc_sid=f5662c&_nc_ohc=tt8z1knDr6oQ7kNvwFjQZQP&_nc_oc=Adk5B7vST1kxheuDFvqXNcGF0AT-StYQlRAF_N5nEtnIsX2Q8quYivqMwcI7E2Rzf1s&_nc_zt=24&_nc_ht=scontent.fsgn5-8.fna&oh=00_AfUR6sbbnNPL0DBOS2edROl-_BZrbtGnFvF5NT6apAaLkQ&oe=68CB583A"
        class="auth-avatar"
        alt="Avatar"
        (click)="toggleAvatarMenu()"
      />


    </div>
  </div>
</header>

<main class="update-page">
  <div class="content-wrapper"></div>
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="profile-avatar">
      <img src="https://scontent.fsgn5-8.fna.fbcdn.net/v/t1.30497-1/453178253_471506465671661_2781666950760530985_n.png?stp=cp0_dst-png_s40x40&_nc_cat=1&_nc_sid=f5662c&_nc_ohc=tt8z1knDr6oQ7kNvwFjQZQP&_nc_oc=Adk5B7vST1kxheuDFvqXNcGF0AT-StYQlRAF_N5nEtnIsX2Q8quYivqMwcI7E2Rzf1s&_nc_zt=24&_nc_ht=scontent.fsgn5-8.fna&oh=00_AfUR6sbbnNPL0DBOS2edROl-_BZrbtGnFvF5NT6apAaLkQ&oe=68CB583A" alt="User Avatar" />
      <h3>{{ username }}</h3>
    </div>
    <ul class="sidebar-menu">
      <li><a routerLink="/home">Home</a></li>
      <li><a href="#">Work</a></li>
      <li><a (click)="logout()">Signout</a></li>
    </ul>
  </aside>

  <!-- Content -->
  <section class="update-content">
    <div class="card">
      <h2>About</h2>
      <p><strong>Role:</strong> {{ userRole }}</p>
      <p *ngIf="userRole === 'student'">Bạn đang đăng nhập với quyền <b>Học sinh</b></p>
      <p *ngIf="userRole === 'tutor'">Bạn đang đăng nhập với quyền <b>Gia sư</b></p>
      <p *ngIf="!userRole">Bạn chưa đăng nhập. Vui lòng <a routerLink="/login">đăng nhập</a>.</p>
    </div>

    <form class="edit-form" (ngSubmit)="updateProfile()">
      <label>
        Username
        <input type="text" name="username" [(ngModel)]="username" required />
      </label>

      <label>
        Password
        <input type="password" name="password" [(ngModel)]="password" placeholder="Nhập mật khẩu mới (nếu đổi)" />
      </label>

      <ng-container *ngIf="userRole === 'student'">
        <label>
          Grade
          <input
            type="number"
            name="grade"
            [(ngModel)]="grade"
            min="1"
            max="12"
          />
        </label>
      </ng-container>

      <label>
        Qualifications
        <input type="text" name="qualifications" [(ngModel)]="qualifications" [disabled]="userRole !== 'tutor'" />
      </label>

      <label>
        Skills
        <input type="text" name="skills" [(ngModel)]="skills" [disabled]="userRole !== 'tutor'" />
      </label>

      <label>
        Teaching Grades
        <input type="text" name="teachingGrades" [(ngModel)]="teachingGrades" [disabled]="userRole !== 'tutor'" />
      </label>

      <label>
        Price
        <input type="number" name="price" [(ngModel)]="price" min="0" [disabled]="userRole !== 'tutor'"/>
      </label>

      <button class="btn btn-primary" type="submit">
        {{ isLoading ? 'Đang lưu...' : 'Save Changes' }}
      </button>

      <p class="success" *ngIf="successMessage">{{ successMessage }}</p>
      <p class="error" *ngIf="errorMessage">{{ errorMessage }}</p>
    </form>
  </section>
</main>
