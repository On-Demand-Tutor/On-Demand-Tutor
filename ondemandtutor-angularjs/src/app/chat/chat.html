<div class="chat-container">
  <!-- Sidebar: danh sách tutor -->
  <aside class="chat-sidebar">
    <div class="sidebar-header">
      <h2>Gia sư</h2>
      <input type="text" placeholder="Tìm kiếm..."
             [(ngModel)]="searchTerm" (ngModelChange)="applyFilter()">
    </div>

    <div class="sidebar-list">
      <div class="sidebar-item"
           *ngFor="let t of filteredTutors"
           [class.active]="t.id === currentChatId"
           (click)="selectTutor(t)">
        <div class="meta">
          <div class="name">{{ t.name }}</div>
        </div>
      </div>
    </div>
  </aside>

  <!-- Khung chat -->
  <section class="chat-main">
    <header class="chat-header">
      <h3>{{ chatTitle }}</h3>
      <span class="status" *ngIf="isLoadingHistory">Đang tải...</span>
    </header>

    <div class="chat-messages">
      <div *ngFor="let m of messages"
           class="msg" [class.sent]="m.type==='sent'" [class.received]="m.type==='received'">
        <div class="bubble">
          <div class="text">{{ m.text }}</div>
          <div class="time">{{ m.time }}</div>
        </div>
      </div>
    </div>

    <footer class="chat-input">
      <input type="text" placeholder="Nhập tin nhắn..."
             [(ngModel)]="newMessage" (keyup.enter)="send()"
             [disabled]="!currentChatId || isSending" />
      <button type="button" (click)="send()" [disabled]="!currentChatId || isSending">Gửi</button>
    </footer>
  </section>
</div>
