<header>
  <div class="container">
    <h1 class="logo">On-Demand-Tutor</h1>
    <nav>
      <ul>
        <li><a routerLink="/home">Trang chủ</a></li>
        <li><a routerLink="/search_tutor">Tìm gia sư</a></li>
      </ul>
    </nav>
  </div>
</header>

<main class="profile-page">
  <!-- Sidebar -->
  <aside class="sidebar-profile">
    <div class="profile-avatar">
      <img src="https://scontent.fsgn5-8.fna.fbcdn.net/v/t1.30497-1/453178253_471506465671661_2781666950760530985_n.png?stp=cp0_dst-png_s40x40&_nc_cat=1&_nc_sid=f5662c&_nc_ohc=tt8z1knDr6oQ7kNvwFjQZQP&_nc_oc=Adk5B7vST1kxheuDFvqXNcGF0AT-StYQlRAF_N5nEtnIsX2Q8quYivqMwcI7E2Rzf1s&_nc_zt=24&_nc_ht=scontent.fsgn5-8.fna&oh=00_AfUR6sbbnNPL0DBOS2edROl-_BZrbtGnFvF5NT6apAaLkQ&oe=68CB583A" alt="User Avatar" />
      <h3>{{ username }}</h3>
    </div>
    <ul class="sidebar-menu-tutor">
      <li><a (click)="goUpdateProfile()">✏️ Chỉnh sửa hồ sơ</a></li>
      <li><a routerLink="/chat" target="_blank">💬 Chat ngay</a></li> <!-- 👈 Nút chat -->
      <li><a (click)="logout()">🚪 Đăng xuất</a></li>
    </ul>
  </aside>

  <!-- Content -->
  <section class="profile-content" *ngIf="!isLoading; else loadingTpl">
    <div class="card">
      <h2>📌 Thông tin tài khoản</h2>
      <div class="info-row"><b>Vai trò:</b> {{ userRole }}</div>
      <div *ngIf="userRole === 'student'" class="info-row">
        <b>Lớp:</b> {{ grade }}
      </div>
      <ng-container *ngIf="userRole === 'tutor'">
        <div class="info-row"><b>Trình độ:</b> {{ qualifications }}</div>
        <div class="info-row"><b>Kỹ năng:</b> {{ skills }}</div>
        <div class="info-row"><b>Lớp dạy:</b> {{ teachingGrades }}</div>
        <div class="info-row"><b>Giá dạy:</b> {{ price | currency:'VND' }}/h</div>
        <div class="info-row"><b>Mô tả:</b> {{ description }}</div>
        <div class="info-row" *ngIf="(promoFiles?.length ?? 0) > 0">
          <b>File đính kèm:</b>
          <ul>
            <li *ngFor="let file of promoFiles; let i = index">
              <a [href]="file" target="_blank">📂 File {{ i + 1 }}</a>
            </li>
          </ul>
        </div>

      </ng-container>
    </div>

    <p class="error" *ngIf="errorMessage">{{ errorMessage }}</p>
  </section>

  <!-- Loading -->
  <ng-template #loadingTpl>
    <div class="card loading-card">
      <p>⏳ Đang tải thông tin...</p>
    </div>
  </ng-template>
</main>
